!function($){"use strict";$.event.special.destroyed||($.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}),$.fn.extend({maxlength:function(t,e){function a(e){var a=e.val();a=t.twoCharLinebreak?a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):a.replace(new RegExp("\r?\n","g"),"\n");var n=0;return n=t.utf8?o(a):a.length}function n(e,a){var n=e.val(),o=0;t.twoCharLinebreak&&(n=n.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),"\n"===n.substr(n.length-1)&&n.length%2===1&&(o=1)),e.val(n.substr(0,a-o))}function o(t){for(var e=0,a=0;a<t.length;a++){var n=t.charCodeAt(a);128>n?e++:e+=n>127&&2048>n?2:3}return e}function s(e,n,o){var s=!0;return!t.alwaysShow&&o-a(e)>n&&(s=!1),s}function r(t,e){var n=e-a(t);return n}function i(t,e){e.css({display:"block"}),t.trigger("maxlength.shown")}function l(e,a){t.alwaysShow||(a.css({display:"none"}),e.trigger("maxlength.hidden"))}function c(e,a,n){var o="";return t.message?o="function"==typeof t.message?t.message(e,a):t.message.replace("%charsTyped%",n).replace("%charsRemaining%",a-n).replace("%charsTotal%",a):(t.preText&&(o+=t.preText),o+=t.showCharsTyped?n:a-n,t.showMaxLength&&(o+=t.separator+a),t.postText&&(o+=t.postText)),o}function p(e,a,n,o){o&&(o.html(c(a.val(),n,n-e)),e>0?s(a,t.threshold,n)?i(a,o.removeClass(t.limitReachedClass).addClass(t.warningClass)):l(a,o):i(a,o.removeClass(t.warningClass).addClass(t.limitReachedClass))),t.customMaxAttribute&&(0>e?a.addClass("overmax"):a.removeClass("overmax"))}function h(t){var e=t[0];return $.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},t.offset())}function f(e,a){var n=h(e);if("function"===$.type(t.placement))return void t.placement(e,a,n);if($.isPlainObject(t.placement))return void u(t.placement,a);var o=e.outerWidth(),s=a.outerWidth(),r=a.width(),i=a.height();switch(t.appendToParent&&(n.top-=e.parent().offset().top,n.left-=e.parent().offset().left),t.placement){case"bottom":a.css({top:n.top+n.height,left:n.left+n.width/2-r/2});break;case"top":a.css({top:n.top-i,left:n.left+n.width/2-r/2});break;case"left":a.css({top:n.top+n.height/2-i/2,left:n.left-r});break;case"right":a.css({top:n.top+n.height/2-i/2,left:n.left+n.width});break;case"bottom-right":a.css({top:n.top+n.height,left:n.left+n.width});break;case"top-right":a.css({top:n.top-i,left:n.left+o});break;case"top-left":a.css({top:n.top-i,left:n.left-s});break;case"bottom-left":a.css({top:n.top+e.outerHeight(),left:n.left-s});break;case"centered-right":a.css({top:n.top+i/2,left:n.left+o-s-3});break;case"bottom-right-inside":a.css({top:n.top+n.height,left:n.left+n.width-s});break;case"top-right-inside":a.css({top:n.top-i,left:n.left+o-s});break;case"top-left-inside":a.css({top:n.top-i,left:n.left});break;case"bottom-left-inside":a.css({top:n.top+e.outerHeight(),left:n.left})}}function u(e,a){if(e&&a){var n=["top","bottom","left","right","position"],o={};$.each(n,function(e,a){var n=t.placement[a];"undefined"!=typeof n&&(o[a]=n)}),a.css(o)}}function d(){return"bottom-right-inside"===t.placement||"top-right-inside"===t.placement||"function"==typeof t.placement||t.message&&"function"==typeof t.message}function g(e){var a=e.attr("maxlength")||t.customMaxAttribute;if(t.customMaxAttribute&&!t.allowOverMax){var n=e.attr(t.customMaxAttribute);(!a||a>n)&&(a=n)}return a||(a=e.attr("size")),a}var m=$("body"),v={showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1};return $.isFunction(t)&&!e&&(e=t,t={}),t=$.extend(v,t),this.each(function(){function e(){var e=c(a.val(),o,"0");o=g(a),s||(s=$('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(e)),a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),a.mouseup(function(){(a.outerWidth()!==a.data("maxlenghtsizex")||a.outerHeight()!==a.data("maxlenghtsizey"))&&f(a,s),a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight())})),t.appendToParent?(a.parent().append(s),a.parent().css("position","relative")):m.append(s);var n=r(a,g(a));p(n,a,o,s),f(a,s)}var a=$(this),o,s;$(window).resize(function(){s&&f(a,s)}),t.showOnReady?a.ready(function(){e()}):a.focus(function(){e()}),a.on("maxlength.reposition",function(){f(a,s)}),a.on("destroyed",function(){s&&s.remove()}),a.on("blur",function(){!s||t.showOnReady||t.alwaysShow||s.remove()}),a.on("input",function(){var e=g(a),i=r(a,e),l=!0;return t.validate&&0>i?(n(a,e),l=!1):p(i,a,o,s),d()&&f(a,s),l})})}})}(jQuery);